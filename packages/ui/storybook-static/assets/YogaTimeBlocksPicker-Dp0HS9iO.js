import{j as n}from"./jsx-runtime-CDt2p4po.js";import{R as j}from"./index-GiUgBvb1.js";const h=[{key:"early",label:"Early Morning",range:["05:30","07:00"]},{key:"mid",label:"Mid-Morning",range:["09:00","11:00"]},{key:"lunch",label:"Lunchtime",range:["12:00","13:00"]},{key:"evening",label:"Evening Peak",range:["17:00","20:00"]}];function b(a){const[r,e]=a.split(":").map(Number);return r*60+e}function k(a,r,e){const s=b(a);return s>=b(r)&&s<=b(e)}function N(a,r,e){let s=a;if(r&&r.length){const t=new Set(r);s=s.filter(d=>t.has(d.id))}return e&&e.length&&(s=s.map(t=>({...t,times:t.times.filter(d=>e.some(([g,y])=>k(d.id,g,y)))}))),s}function B(a){switch(a){case"runner":return new Set(["early","evening"]);case"traveler":return new Set(["evening","mid"]);case"dancer":return new Set(["mid","lunch"]);default:return new Set(["mid","evening"])}}function C(a){const{days:r,selectedIds:e,onChange:s,minSelections:t=3,onDone:d,persona:g,skin:y="ulyxes",className:q,hideDoneButton:T=!1,restrictDays:f,restrictWindows:v}=a,[M,Y]=j.useState(null),[R,P]=j.useState(()=>({})),S=B(g),$=(l,i)=>{const c=`${l}:${i}`,m=e.includes(c)?e.filter(o=>o!==c):[...e,c];s(m)},_=e.length>=t,A=()=>{const l=["mid","evening","lunch","early"],i=[],c=new Set,u=N(r,f,v);for(const m of l){for(const o of u){if(c.has(o.id))continue;const w=o.times.filter(I=>k(I.id,h.find(p=>p.key===m).range[0],h.find(p=>p.key===m).range[1]));if(w.length===0)continue;const D=w[0],x=`${o.id}:${D.id}`;if(!e.includes(x)&&(i.push(x),c.add(o.id),i.length===3))break}if(i.length===3)break}i.length>0&&s(Array.from(new Set([...e,...i])).slice(0,Math.max(t,3)))};return n.jsx("div",{"data-skin":y,className:q,children:n.jsxs("section",{className:"yui-time-blocks","aria-label":"Yoga time picker (blocks)",children:[n.jsxs("header",{className:"yui-time-blocks__header",children:[n.jsx("div",{className:"yui-time-blocks__title",children:"Choose your preferred times"}),n.jsxs("div",{className:"yui-time-blocks__progress","aria-live":"polite",children:[n.jsx("div",{className:"yui-time-blocks__progress-text",children:e.length<t?`${e.length}/${t}`:`${e.length} selected`}),n.jsx("div",{className:"yui-time-blocks__progress-bar",children:n.jsx("span",{style:{width:`${Math.min(100,e.length/t*100)}%`}})})]})]}),n.jsxs("div",{className:"yui-time-blocks__actions",children:[n.jsxs("button",{type:"button",className:"yui-btn yui-time-blocks__quick",onClick:A,children:["Quick pick ",t]}),!T&&n.jsx("button",{type:"button",className:"yui-btn yui-time-blocks__done",disabled:!_,onClick:()=>_&&(d==null?void 0:d(e)),children:"Done"})]}),n.jsx("div",{className:"yui-time-blocks__grid",children:N(r,f,v).map(l=>n.jsxs("section",{className:"yui-time-blocks__day",children:[n.jsx("h3",{className:"yui-time-blocks__day-header",children:l.label}),n.jsx("div",{className:"yui-time-blocks__times",children:l.times.map(i=>{const c=`${l.id}:${i.id}`,u=e.includes(c),m=h.find(o=>k(i.id,o.range[0],o.range[1]));return m&&S.has(m.key),n.jsxs("button",{type:"button",className:`yui-time-pill ${u?"is-selected":""}`,"aria-pressed":u,onClick:()=>$(l.id,i.id),children:[n.jsx("span",{className:"yui-time-pill__label",children:i.label}),i.sublabel&&n.jsx("span",{className:"yui-time-pill__sublabel",children:i.sublabel})]},c)})})]},l.id))})]})})}C.__docgenInfo={description:"",methods:[],displayName:"YogaTimeBlocksPicker",props:{days:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  label: string
  times: YogaTimeItem[]
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"times",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string // HH:mm
  label: string
  sublabel?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"sublabel",value:{name:"string",required:!1}}]}}],raw:"YogaTimeItem[]",required:!0}}]}}],raw:"YogaDay[]"},description:""},selectedIds:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},minSelections:{required:!1,tsType:{name:"number"},description:""},onDone:{required:!1,tsType:{name:"signature",type:"function",raw:"(ids: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"ids"}],return:{name:"void"}}},description:""},persona:{required:!1,tsType:{name:"union",raw:"'runner' | 'traveler' | 'dancer' | string",elements:[{name:"literal",value:"'runner'"},{name:"literal",value:"'traveler'"},{name:"literal",value:"'dancer'"},{name:"string"}]},description:""},skin:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},hideDoneButton:{required:!1,tsType:{name:"boolean"},description:""},restrictDays:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},restrictWindows:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"unknown"}],raw:"ReadonlyArray<readonly [string, string]>"},description:""}}};export{C as Y};
