import{j as s}from"./jsx-runtime-CDt2p4po.js";import{r as w}from"./index-GiUgBvb1.js";function v(e){const i=new Date(e*1e3),a=i.toLocaleDateString("en-US",{weekday:"long"}),c=i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),t=i.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${a}, ${t} at ${c}`}function f(e){return e.includes(" student")?e:`${e.slice(0,6)}...${e.slice(-4)}`}function S(e){switch(e){case"accepted":return"Accepted";case"completed":return"Paid";case"cancelled":return"Cancelled";case"awaiting_release":return"Awaiting Release";default:return e.charAt(0).toUpperCase()+e.slice(1)}}function $(e){switch(e){case"completed":return"upcoming-class-card__student-status--completed";case"cancelled":return"upcoming-class-card__student-status--cancelled";case"awaiting_release":return"upcoming-class-card__student-status--awaiting";default:return"upcoming-class-card__student-status--accepted"}}function b(e){const i=Date.now()/1e3,a=e-i;if(a<0)return"Past due";const c=Math.floor(a/86400),t=Math.floor(a%86400/3600),o=Math.floor(a%3600/60);return c>0?`in ${c} day${c>1?"s":""}`:t>0?`in ${t} hour${t>1?"s":""}`:o>0?`in ${o} minute${o>1?"s":""}`:"very soon"}const T=({acceptedClass:e,onCancel:i,onViewStudentDetails:a,fiatCurrency:c="USD",ethToFiatRate:t,formatFiat:o,className:x})=>{var h;const[d,j]=w.useState(!1),y=["upcoming-class-card",x].filter(Boolean).join(" "),p=n=>{if(!t)return null;const l=n*t;return o?o(l,c):new Intl.NumberFormat(void 0,{style:"currency",currency:c}).format(l)},_=b(e.classTime),u=_==="Past due",r=e.isGroup&&e.students&&e.students.length>1,m=r&&e.totalPayout||e.payout,N=r?`${e.totalStudents||((h=e.students)==null?void 0:h.length)||0} Students`:f(e.studentAddress),g=e.status==="completed"&&!u?"paid":e.status;return s.jsxs("div",{className:`${y} ${u?"upcoming-class-card--past-due":""}`,children:[s.jsxs("div",{className:"upcoming-class-card__header",children:[s.jsxs("div",{className:"upcoming-class-card__title-section",children:[s.jsx("h3",{className:"upcoming-class-card__title",children:e.description}),s.jsxs("div",{className:"upcoming-class-card__time-info",children:[s.jsx("span",{className:"upcoming-class-card__datetime",children:v(e.classTime)}),s.jsx("span",{className:`upcoming-class-card__countdown ${u?"upcoming-class-card__countdown--past-due":""}`,children:_})]})]}),s.jsx("div",{className:"upcoming-class-card__status",children:s.jsx("span",{className:`upcoming-class-card__status-badge upcoming-class-card__status-badge--${g}`,children:g.toUpperCase()})})]}),s.jsxs("div",{className:"upcoming-class-card__details",children:[s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:r?"Students:":"Student:"}),s.jsx("span",{className:"upcoming-class-card__detail-value",children:N})]}),s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:"Location:"}),s.jsx("span",{className:"upcoming-class-card__detail-value",children:e.location})]}),s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:r?"Total Payout:":"Payout:"}),s.jsxs("span",{className:"upcoming-class-card__detail-value upcoming-class-card__payout",children:[m," ETH",p(parseFloat(m))&&s.jsxs("span",{className:"upcoming-class-card__fiat",children:["(",p(parseFloat(m)),")"]})]})]}),!r&&s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:"Escrow ID:"}),s.jsxs("span",{className:"upcoming-class-card__detail-value upcoming-class-card__escrow-id",children:["#",e.escrowId]})]}),r&&s.jsx("div",{className:"upcoming-class-card__detail-row",children:s.jsx("button",{className:"upcoming-class-card__roster-toggle",onClick:()=>j(!d),children:d?"Hide Roster ▲":"View Roster ▼"})})]}),r&&d&&e.students&&s.jsxs("div",{className:"upcoming-class-card__roster",children:[s.jsx("div",{className:"upcoming-class-card__roster-header",children:s.jsx("h4",{children:"Roster"})}),s.jsx("div",{className:"upcoming-class-card__roster-list",children:e.students.map((n,l)=>s.jsxs("div",{className:"upcoming-class-card__student-row",children:[s.jsxs("div",{className:"upcoming-class-card__student-info",children:[s.jsxs("span",{className:"upcoming-class-card__student-label",children:["Student ",String.fromCharCode(65+l)," (",f(n.studentAddress),")"]}),s.jsxs("span",{className:"upcoming-class-card__student-payout",children:[n.payout," ETH"]})]}),s.jsxs("div",{className:"upcoming-class-card__student-actions",children:[s.jsx("span",{className:`upcoming-class-card__student-status ${$(n.status)}`,children:S(n.status)}),s.jsxs("button",{className:"upcoming-class-card__student-details",onClick:()=>a==null?void 0:a(n.escrowId),title:`View details for Escrow #${n.escrowId}`,children:["#",n.escrowId]})]})]},n.escrowId))})]})]})};T.__docgenInfo={description:"",methods:[],displayName:"UpcomingClassCard",props:{acceptedClass:{required:!0,tsType:{name:"AcceptedClass"},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onViewStudentDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},fiatCurrency:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'USD'",computed:!1}},ethToFiatRate:{required:!1,tsType:{name:"number"},description:""},formatFiat:{required:!1,tsType:{name:"signature",type:"function",raw:"(fiatAmount: number, currency: string) => string",signature:{arguments:[{type:{name:"number"},name:"fiatAmount"},{type:{name:"string"},name:"currency"}],return:{name:"string"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{T as U};
