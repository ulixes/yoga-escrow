import{j as a}from"./jsx-runtime-CDt2p4po.js";import{r as d}from"./index-GiUgBvb1.js";import{B as ue,C as n}from"./BookingRequestCard-C-mSuYLG.js";function de(e,s){if(s==="all")return e;const o=Math.floor(Date.now()/1e3);return e.filter(t=>{switch(s){case"pending":return t.status===n.Pending;case"confirmed":return t.status===n.Accepted||t.status===n.Delivered&&t.classTime&&t.classTime>o;case"completed":return t.status===n.Delivered&&(!t.classTime||t.classTime<=o);case"cancelled":return t.status===n.Cancelled;default:return!0}})}function me(e,s){const o=[...e];switch(s){case"newest":return o.sort((t,i)=>i.createdAt-t.createdAt);case"class-date":return o.sort((t,i)=>!t.classTime&&!i.classTime?i.createdAt-t.createdAt:t.classTime?i.classTime?t.classTime-i.classTime:-1:1);case"amount":return o.sort((t,i)=>parseFloat(i.amount)-parseFloat(t.amount));default:return o}}function ge(e){const s={all:e.length,pending:0,confirmed:0,completed:0,cancelled:0},o=Math.floor(Date.now()/1e3);return e.forEach(t=>{switch(t.status){case n.Pending:s.pending++;break;case n.Accepted:s.confirmed++;break;case n.Delivered:t.classTime&&t.classTime<=o?s.completed++:s.confirmed++;break;case n.Cancelled:s.cancelled++;break}}),s}const Q=({bookings:e,onCancel:s,onReleasePayment:o,onCreateBooking:t,fiatCurrency:i="USD",ethToFiatRate:X,formatFiat:Z,className:ee,initialFilter:te="all",initialSort:ae="newest"})=>{const[T,se]=d.useState(te),[w,ne]=d.useState(ae),[m,re]=d.useState(""),v=d.useMemo(()=>{let r=de(e,T);if(m.trim()){const g=m.toLowerCase();r=r.filter(p=>{var x;return p.teacherHandles.some(ce=>ce.toLowerCase().includes(g))||p.location.toLowerCase().includes(g)||p.description.toLowerCase().includes(g)||((x=p.selectedHandle)==null?void 0:x.toLowerCase().includes(g))})}return me(r,w)},[e,T,w,m]),u=d.useMemo(()=>ge(e),[e]),oe=["bookings-list",ee].filter(Boolean).join(" "),ie=[{key:"all",label:"All",count:u.all},{key:"pending",label:"Pending",count:u.pending},{key:"confirmed",label:"Confirmed",count:u.confirmed},{key:"completed",label:"Completed",count:u.completed},{key:"cancelled",label:"Cancelled",count:u.cancelled}],le=[{key:"newest",label:"Newest first"},{key:"class-date",label:"Class date"},{key:"amount",label:"Amount"}];return a.jsxs("div",{className:oe,children:[a.jsxs("div",{className:"bookings-list__header",children:[a.jsx("h2",{className:"bookings-list__title",children:"Your Class Requests"}),a.jsxs("div",{className:"bookings-list__controls",children:[a.jsx("div",{className:"bookings-list__search",children:a.jsx("input",{type:"text",placeholder:"Search by teacher or location...",value:m,onChange:r=>re(r.target.value),className:"bookings-list__search-input"})}),a.jsxs("div",{className:"bookings-list__sort",children:[a.jsx("label",{htmlFor:"sort-select",className:"bookings-list__sort-label",children:"Sort by:"}),a.jsx("select",{id:"sort-select",value:w,onChange:r=>ne(r.target.value),className:"bookings-list__sort-select",children:le.map(r=>a.jsx("option",{value:r.key,children:r.label},r.key))})]})]})]}),a.jsx("div",{className:"bookings-list__filters",children:ie.map(r=>a.jsxs("button",{className:`bookings-list__filter ${T===r.key?"bookings-list__filter--active":""}`,onClick:()=>se(r.key),children:[r.label," (",r.count,")"]},r.key))}),a.jsx("div",{className:"bookings-list__content",children:v.length===0?a.jsx("div",{className:"bookings-list__empty",children:e.length===0?a.jsxs("div",{className:"bookings-list__empty-state",children:[a.jsx("h3",{className:"bookings-list__empty-title",children:"No bookings yet"}),a.jsx("p",{className:"bookings-list__empty-text",children:"Ready to book your first yoga class? Start by creating a booking request."}),t&&a.jsx("button",{className:"bookings-list__create-button",onClick:t,children:"Create Booking"})]}):a.jsxs("div",{className:"bookings-list__no-results",children:[a.jsx("h3",{className:"bookings-list__no-results-title",children:"No bookings found"}),a.jsx("p",{className:"bookings-list__no-results-text",children:"Try adjusting your filters or search terms."})]})}):a.jsx("div",{className:"bookings-list__grid",children:v.map(r=>a.jsx(ue,{escrow:r,onCancel:s,onReleasePayment:o,fiatCurrency:i,ethToFiatRate:X,formatFiat:Z},r.id))})})]})};Q.__docgenInfo={description:"",methods:[],displayName:"BookingsList",props:{bookings:{required:!0,tsType:{name:"Array",elements:[{name:"Escrow"}],raw:"Escrow[]"},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onReleasePayment:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onCreateBooking:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},fiatCurrency:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'USD'",computed:!1}},ethToFiatRate:{required:!1,tsType:{name:"number"},description:""},formatFiat:{required:!1,tsType:{name:"signature",type:"function",raw:"(fiatAmount: number, currency: string) => string",signature:{arguments:[{type:{name:"number"},name:"fiatAmount"},{type:{name:"string"},name:"currency"}],return:{name:"string"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},initialFilter:{required:!1,tsType:{name:"union",raw:"'all' | 'pending' | 'confirmed' | 'completed' | 'cancelled'",elements:[{name:"literal",value:"'all'"},{name:"literal",value:"'pending'"},{name:"literal",value:"'confirmed'"},{name:"literal",value:"'completed'"},{name:"literal",value:"'cancelled'"}]},description:"",defaultValue:{value:"'all'",computed:!1}},initialSort:{required:!1,tsType:{name:"union",raw:"'newest' | 'class-date' | 'amount'",elements:[{name:"literal",value:"'newest'"},{name:"literal",value:"'class-date'"},{name:"literal",value:"'amount'"}]},description:"",defaultValue:{value:"'newest'",computed:!1}}}};const he={title:"Components/BookingsList",component:Q,parameters:{layout:"fullscreen"},tags:["autodocs"],argTypes:{onCancel:{action:"cancel"},onReleasePayment:{action:"release-payment"},onViewDetails:{action:"view-details"},onCreateBooking:{action:"create-booking"}}};function l(e,s={}){const o=Math.floor(Date.now()/1e3);return{id:e,student:"0x1234567890123456789012345678901234567890",amount:"0.002",status:n.Pending,createdAt:o-e*3600,description:"Private yoga class booking",location:"Vake Park, Tbilisi",studentEmail:"student@example.com",teacherHandles:["@yoga_master","@zen_teacher","@flow_guru"],timeSlots:[o+86400+e*3600,o+172800+e*3600,o+259200+e*3600],...s}}const c=[l(1,{status:n.Pending,description:"Vinyasa Flow Session",location:"Vake Park, Tbilisi"}),l(2,{status:n.Accepted,description:"Hatha Yoga Class",location:"Rustaveli Avenue Studio",teacher:"0x0987654321098765432109876543210987654321",classTime:Math.floor(Date.now()/1e3)+86400,selectedTimeIndex:0,selectedHandle:"@yoga_master"}),l(3,{status:n.Delivered,description:"Power Yoga Session",location:"Saburtalo Fitness Center",teacher:"0x0987654321098765432109876543210987654321",classTime:Math.floor(Date.now()/1e3)-3600,selectedTimeIndex:1,selectedHandle:"@zen_teacher",amount:"0.0035"}),l(4,{status:n.Cancelled,description:"Yin Yoga Class",location:"Old Tbilisi Courtyard"}),l(5,{status:n.Pending,description:"Ashtanga Practice",location:"Mtatsminda Park",amount:"0.003"}),l(6,{status:n.Accepted,description:"Restorative Yoga",location:"Vere Valley",teacher:"0x1111111111111111111111111111111111111111",classTime:Math.floor(Date.now()/1e3)+172800,selectedTimeIndex:2,selectedHandle:"@flow_guru",amount:"0.0025"})],f={args:{bookings:c,ethToFiatRate:2500,fiatCurrency:"USD"}},y={args:{bookings:[],ethToFiatRate:2500,fiatCurrency:"USD"}},h={args:{bookings:c.filter(e=>e.status===n.Pending),ethToFiatRate:2500,fiatCurrency:"USD",initialFilter:"pending"}},k={args:{bookings:c.filter(e=>e.status===n.Accepted),ethToFiatRate:2500,fiatCurrency:"USD",initialFilter:"confirmed"}},b={args:{bookings:c,ethToFiatRate:2500,fiatCurrency:"USD",initialSort:"amount"}},C={args:{bookings:c.slice(0,3)}},S={args:{bookings:[...c,...Array.from({length:10},(e,s)=>l(s+10,{status:[n.Pending,n.Accepted,n.Delivered,n.Cancelled][s%4],description:`Yoga Class ${s+10}`,location:["Vake Park","Rustaveli Studio","Saburtalo Center","Old Town"][s%4],amount:(Math.random()*.01+.001).toFixed(4)}))],ethToFiatRate:2500,fiatCurrency:"USD"}},_={args:{bookings:c.slice(0,4),ethToFiatRate:2200,fiatCurrency:"EUR",formatFiat:(e,s)=>`${e.toFixed(2)} ${s}`}};var F,D,R;f.parameters={...f.parameters,docs:{...(F=f.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings,
    ethToFiatRate: 2500,
    fiatCurrency: 'USD'
  }
}`,...(R=(D=f.parameters)==null?void 0:D.docs)==null?void 0:R.source}}};var j,N,A;y.parameters={...y.parameters,docs:{...(j=y.parameters)==null?void 0:j.docs,source:{originalSource:`{
  args: {
    bookings: [],
    ethToFiatRate: 2500,
    fiatCurrency: 'USD'
  }
}`,...(A=(N=y.parameters)==null?void 0:N.docs)==null?void 0:A.source}}};var P,B,U;h.parameters={...h.parameters,docs:{...(P=h.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings.filter(b => b.status === ClassStatus.Pending),
    ethToFiatRate: 2500,
    fiatCurrency: 'USD',
    initialFilter: 'pending'
  }
}`,...(U=(B=h.parameters)==null?void 0:B.docs)==null?void 0:U.source}}};var M,q,E;k.parameters={...k.parameters,docs:{...(M=k.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings.filter(b => b.status === ClassStatus.Accepted),
    ethToFiatRate: 2500,
    fiatCurrency: 'USD',
    initialFilter: 'confirmed'
  }
}`,...(E=(q=k.parameters)==null?void 0:q.docs)==null?void 0:E.source}}};var V,L,I;b.parameters={...b.parameters,docs:{...(V=b.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings,
    ethToFiatRate: 2500,
    fiatCurrency: 'USD',
    initialSort: 'amount'
  }
}`,...(I=(L=b.parameters)==null?void 0:L.docs)==null?void 0:I.source}}};var Y,H,$;C.parameters={...C.parameters,docs:{...(Y=C.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings.slice(0, 3)
  }
}`,...($=(H=C.parameters)==null?void 0:H.docs)==null?void 0:$.source}}};var O,z,W;S.parameters={...S.parameters,docs:{...(O=S.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    bookings: [...mockBookings, ...Array.from({
      length: 10
    }, (_, i) => createMockEscrow(i + 10, {
      status: [ClassStatus.Pending, ClassStatus.Accepted, ClassStatus.Delivered, ClassStatus.Cancelled][i % 4],
      description: \`Yoga Class \${i + 10}\`,
      location: ['Vake Park', 'Rustaveli Studio', 'Saburtalo Center', 'Old Town'][i % 4],
      amount: (Math.random() * 0.01 + 0.001).toFixed(4)
    }))],
    ethToFiatRate: 2500,
    fiatCurrency: 'USD'
  }
}`,...(W=(z=S.parameters)==null?void 0:z.docs)==null?void 0:W.source}}};var G,J,K;_.parameters={..._.parameters,docs:{...(G=_.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    bookings: mockBookings.slice(0, 4),
    ethToFiatRate: 2200,
    fiatCurrency: 'EUR',
    formatFiat: (amount: number, currency: string) => \`\${amount.toFixed(2)} \${currency}\`
  }
}`,...(K=(J=_.parameters)==null?void 0:J.docs)==null?void 0:K.source}}};const ke=["Default","EmptyState","OnlyPending","OnlyConfirmed","SortByAmount","WithoutFiatRate","ManyBookings","CustomFiatFormat"];export{_ as CustomFiatFormat,f as Default,y as EmptyState,S as ManyBookings,k as OnlyConfirmed,h as OnlyPending,b as SortByAmount,C as WithoutFiatRate,ke as __namedExportsOrder,he as default};
