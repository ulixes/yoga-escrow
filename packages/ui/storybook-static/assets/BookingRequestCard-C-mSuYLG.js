import{j as s}from"./jsx-runtime-CDt2p4po.js";var _=(e=>(e[e.Pending=0]="Pending",e[e.Accepted=1]="Accepted",e[e.Delivered=2]="Delivered",e[e.Cancelled=3]="Cancelled",e))(_||{});function c(e){const a=new Date(e*1e3);return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})+" at "+a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function b(e){const a=Date.now(),i=e*1e3,t=a-i,r=Math.floor(t/(1e3*60*60)),n=Math.floor(r/24);return n>0?`Posted ${n} day${n>1?"s":""} ago`:`Posted ${r} hour${r>1?"s":""} ago`}function h(e){const a=Date.now(),t=e*1e3-a,r=Math.floor(t/(1e3*60*60*24)),n=Math.floor(t%(1e3*60*60*24)/(1e3*60*60));return t<=0?"Class time passed":r>0?`Class in ${r} day${r>1?"s":""}`:n>0?`Class in ${n} hour${n>1?"s":""}`:"Class starting soon"}function p({status:e,classTime:a}){const i=Math.floor(Date.now()/1e3),t=a&&a>i,n={0:{label:"Waiting for Teacher",color:"orange"},1:{label:"Class Confirmed",color:"green"},2:{label:t?"Payment Sent":"Completed",color:t?"green":"blue"},3:{label:"Cancelled",color:"gray"}}[e];return s.jsx("span",{className:`booking-status-badge booking-status-badge--${n.color}`,children:n.label})}const f=({escrow:e,onCancel:a,onReleasePayment:i,fiatCurrency:t="USD",ethToFiatRate:r,formatFiat:n,className:m})=>{const g=["booking-request-card",m].filter(Boolean).join(" "),o=r?parseFloat(e.amount)*r:null,u=o&&n?n(o,t):o?new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(o):null;return s.jsxs("div",{className:g,children:[s.jsxs("div",{className:"booking-request-card__header",children:[s.jsx(p,{status:e.status,classTime:e.classTime}),s.jsxs("div",{className:"booking-request-card__amount",children:[e.amount," ETH",u&&s.jsxs("span",{className:"booking-request-card__fiat",children:["(",u,")"]})]})]}),s.jsxs("div",{className:"booking-request-card__content",children:[s.jsx("div",{className:"booking-request-card__title",children:e.description}),s.jsx("div",{className:"booking-request-card__location",children:e.location}),e.status===0&&s.jsxs("div",{className:"booking-request-card__pending",children:[s.jsxs("div",{className:"booking-request-card__teachers",children:[s.jsx("span",{className:"booking-request-card__label",children:"Teachers:"}),s.jsx("div",{className:"booking-request-card__teacher-chips",children:(e.teacherHandles||[]).map((d,l)=>s.jsx("span",{className:"booking-request-card__teacher-chip",children:d},l))})]}),s.jsxs("div",{className:"booking-request-card__times",children:[s.jsx("span",{className:"booking-request-card__label",children:"Time options:"}),s.jsx("div",{className:"booking-request-card__time-list",children:(e.timeSlots||[]).map((d,l)=>s.jsx("div",{className:"booking-request-card__time-option",children:c(d)},l))})]}),s.jsx("div",{className:"booking-request-card__elapsed",children:b(e.createdAt)})]}),e.status===1&&s.jsxs("div",{className:"booking-request-card__accepted",children:[s.jsxs("div",{className:"booking-request-card__confirmed-teacher",children:[s.jsx("span",{className:"booking-request-card__label",children:"Teacher:"}),s.jsx("span",{className:"booking-request-card__teacher-name",children:e.selectedHandle})]}),s.jsxs("div",{className:"booking-request-card__confirmed-time",children:[s.jsx("span",{className:"booking-request-card__label",children:"Time:"}),s.jsx("span",{className:"booking-request-card__time",children:e.classTime&&c(e.classTime)})]}),e.classTime&&s.jsx("div",{className:"booking-request-card__countdown",children:h(e.classTime)})]}),e.status===2&&s.jsxs("div",{className:"booking-request-card__delivered",children:[s.jsxs("div",{className:"booking-request-card__payment-info",children:["Payment released to ",e.selectedHandle]}),s.jsx("div",{className:"booking-request-card__completed-info",children:e.classTime&&e.classTime>Math.floor(Date.now()/1e3)?`Class scheduled for ${c(e.classTime)}`:`Class completed on ${e.classTime&&c(e.classTime)}`})]}),e.status===3&&s.jsx("div",{className:"booking-request-card__cancelled",children:s.jsxs("div",{className:"booking-request-card__refund-info",children:["Refund processed: ",e.amount," ETH"]})})]}),s.jsxs("div",{className:"booking-request-card__actions",children:[e.status===0&&s.jsx("button",{className:"booking-request-card__action booking-request-card__action--cancel",onClick:()=>a==null?void 0:a(e.id),children:"Cancel Request"}),e.status===1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"booking-request-card__action booking-request-card__action--release",onClick:()=>i==null?void 0:i(e.id),children:"Release Payment"}),s.jsx("button",{className:"booking-request-card__action booking-request-card__action--cancel",onClick:()=>a==null?void 0:a(e.id),children:"Cancel"})]})]})]})};f.__docgenInfo={description:"",methods:[],displayName:"BookingRequestCard",props:{escrow:{required:!0,tsType:{name:"Escrow"},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onReleasePayment:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},fiatCurrency:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'USD'",computed:!1}},ethToFiatRate:{required:!1,tsType:{name:"number"},description:""},formatFiat:{required:!1,tsType:{name:"signature",type:"function",raw:"(fiatAmount: number, currency: string) => string",signature:{arguments:[{type:{name:"number"},name:"fiatAmount"},{type:{name:"string"},name:"currency"}],return:{name:"string"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{f as B,_ as C};
