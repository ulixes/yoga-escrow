import{j as e}from"./jsx-runtime-CDt2p4po.js";import{R as s,r as je}from"./index-GiUgBvb1.js";import{L as _e}from"./LocationPicker-6EM9LXQM.js";import{Y as fe}from"./YogaTimeBlocksPicker-Dp0HS9iO.js";import{T as xe}from"./TeacherDiscovery-gglT1jz9.js";function B(o){const{yogaTypes:u,yogaTypePersonas:i,days:l,teachers:c=[],defaultPersona:D="Traveler",defaultStudentEmail:a,skin:m="ulyxes",className:j,onSubmit:_,onPayment:L,locationProps:Q,startSecondaryLabel:Te="View your bookings",onStartSecondary:qe,paymentSummary:we,isAuthenticated:w=!1,userEmail:P="",userWallet:R="",LoginComponent:Se,onAuthRequired:U}=o,[t,f]=s.useState(1),[X,Z]=s.useState(!0),[d,ee]=s.useState([]),[y,Y]=s.useState(null),[p,J]=s.useState([]),[g,M]=s.useState(a||P||""),[H,ne]=s.useState(R||"");s.useEffect(()=>{w&&(M(P||a||""),ne(R||""))},[w,P,R,a]);const[x,$]=s.useState("1on1"),[b,C]=s.useState(50),E="Traveler",re="None",O="";s.useEffect(()=>{console.log("[JOURNEY DEBUG] FullJourney received defaultStudentEmail:",a),console.log("[JOURNEY DEBUG] Current studentEmail state:",g),a&&(g===""||g===void 0)?(console.log("[JOURNEY DEBUG] Setting email to:",a),M(a)):console.log("[JOURNEY DEBUG] Not setting email - defaultStudentEmail:",a,"studentEmail:",g)},[a]);const I=6,ae=s.useMemo(()=>{switch(t){case 1:return d.length>0;case 2:return d.length>0;case 3:return!!y;case 4:return p.length>=3;case 5:return b>0;default:return!0}},[t,d,E,O,y,p,g,H,w,b,x]),te=()=>{if(t!==I){if(t===1){f(3);return}if(t===4&&!w&&U){U();return}f(r=>r+1)}},se=()=>{if(t!==1){if(t===3){f(1);return}f(r=>r-1)}},ie=r=>{ee(r),f(3)},oe={Dancer:"dancer",Runner:"runner",Traveler:"traveler"};return e.jsx("div",{"data-skin":m,className:["yui-journey",j].filter(Boolean).join(" "),children:X?e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"yui-journey__header",children:e.jsxs("div",{className:"yui-journey__progress",children:[e.jsxs("div",{className:"yui-journey__progress-text",children:["Step ",t,"/",I]}),e.jsx("div",{className:"yui-journey__progress-bar",children:e.jsx("span",{style:{width:`${t/I*100}%`}})})]})}),e.jsxs("main",{className:"yui-journey__content",children:[t===1&&e.jsx("section",{className:"yui-journey__step yui-journey__discovery","aria-label":"Discover Teachers",children:e.jsx(xe,{teachers:c,maxSelection:3,onSubmitSelection:ie})}),t===3&&e.jsx("section",{className:"yui-journey__step","aria-label":"Choose Location",children:e.jsx(_e,{...Q,value:y,onChange:r=>Y(r),onDone:r=>Y(r),skin:m,hideDoneButton:!0})}),t===4&&e.jsx("section",{className:"yui-journey__step","aria-label":"Choose Times",children:e.jsx(fe,{days:l,selectedIds:p,onChange:J,minSelections:3,onDone:J,persona:oe[E],skin:m,hideDoneButton:!0})}),t===5&&e.jsx("section",{className:"yui-journey__step","aria-label":"Pricing",children:e.jsxs("div",{className:"yui-journey__pricing",children:[e.jsxs("div",{className:"yui-journey__hero",children:[e.jsx("h2",{className:"yui-journey__title",children:"Choose Your Session"}),e.jsx("p",{className:"yui-journey__subtitle",children:"Select session type and set your offer amount"})]}),e.jsxs("div",{className:"yui-journey__pricing-options",children:[e.jsxs("div",{className:`yui-journey__pricing-card ${x==="group"?"selected":""}`,onClick:()=>{$("group"),C(10)},children:[e.jsxs("div",{className:"yui-journey__pricing-header",children:[e.jsx("h3",{children:"Group Session"}),e.jsx("div",{className:"yui-journey__price",children:"$10"})]}),e.jsx("p",{className:"yui-journey__pricing-desc",children:"Join a shared yoga class with other students"}),e.jsxs("div",{className:"yui-journey__pricing-features",children:[e.jsx("span",{children:"• Shared experience"}),e.jsx("span",{children:"• Lower cost"}),e.jsx("span",{children:"• Community vibe"})]})]}),e.jsxs("div",{className:`yui-journey__pricing-card ${x==="1on1"?"selected":""}`,onClick:()=>{$("1on1"),C(50)},children:[e.jsxs("div",{className:"yui-journey__pricing-header",children:[e.jsx("h3",{children:"Private 1:1"}),e.jsx("div",{className:"yui-journey__price",children:"$50"})]}),e.jsx("p",{className:"yui-journey__pricing-desc",children:"Personalized session focused entirely on you"}),e.jsxs("div",{className:"yui-journey__pricing-features",children:[e.jsx("span",{children:"• Full attention"}),e.jsx("span",{children:"• Customized practice"}),e.jsx("span",{children:"• Personal guidance"})]})]})]}),e.jsxs("div",{className:"yui-journey__amount-section",children:[e.jsx("label",{className:"yui-journey__amount-label",children:"Your offer amount (USD)"}),e.jsxs("div",{className:"yui-journey__amount-input",children:[e.jsx("span",{className:"yui-journey__currency",children:"$"}),e.jsx("input",{type:"number",value:b,onChange:r=>C(parseFloat(r.target.value)||0),className:"yui-journey__amount-field",min:"1",step:"0.01"})]}),e.jsx("p",{className:"yui-journey__amount-note",children:"Teachers may decline offers significantly below recommended amounts"})]})]})}),t===6&&e.jsx("section",{className:"yui-journey__step","aria-label":"Payment Review",children:e.jsxs("div",{className:"yui-journey__final-review",children:[e.jsxs("div",{className:"yui-journey__hero",children:[e.jsx("h2",{className:"yui-journey__title",children:"Review & Confirm"}),e.jsx("p",{className:"yui-journey__subtitle",children:"Please review your booking details before payment"})]}),e.jsxs("div",{className:"yui-journey__matching-section",children:[e.jsxs("div",{className:"yui-journey__matching-header",children:[e.jsx("h3",{className:"yui-journey__matching-title",children:"Your Booking Request"}),e.jsx("p",{className:"yui-journey__matching-subtitle",children:"First match wins!"})]}),e.jsxs("div",{className:"yui-journey__matching-grid",children:[e.jsxs("div",{className:"yui-journey__matching-teachers",children:[e.jsx("div",{className:"yui-journey__matching-count",children:d.length}),e.jsxs("div",{className:"yui-journey__matching-label",children:["Teacher",d.length>1?"s":""]}),e.jsx("div",{className:"yui-journey__matching-names",children:c.filter(r=>d.includes(r.id)).map(r=>e.jsxs("div",{className:"yui-journey__teacher-chip",children:["@",r.handle]},r.id))})]}),e.jsx("div",{className:"yui-journey__matching-connector",children:e.jsx("span",{className:"yui-journey__matching-times-icon",children:"×"})}),e.jsxs("div",{className:"yui-journey__matching-times",children:[e.jsx("div",{className:"yui-journey__matching-count",children:p.length}),e.jsxs("div",{className:"yui-journey__matching-label",children:["Time Slot",p.length>1?"s":""]}),e.jsx("div",{className:"yui-journey__matching-slots",children:p.map((r,ue)=>{const[le,ce]=r.split(":"),me={mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:0}[le.toLowerCase()],A=new Date,de=A.getDay(),[ye,Le="00"]=ce.split(":"),N=parseInt(ye);let k=me-de;(k<=1||k<0)&&(k+=7);const F=new Date(A);F.setDate(A.getDate()+k);const pe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][F.getMonth()],ge=F.getDate(),he=N>=12?"PM":"AM",ve=N===0?12:N>12?N-12:N;return e.jsxs("div",{className:"yui-journey__time-chip",children:[pe," ",ge,", ",ve,he]},ue)})})]})]})]}),e.jsxs("div",{className:"yui-journey__details-section",children:[e.jsxs("div",{className:"yui-journey__offer-display",children:[e.jsxs("div",{className:"yui-journey__offer-amount",children:["$",b]}),e.jsx("div",{className:"yui-journey__offer-label",children:"Your Offer"}),e.jsx("div",{className:"yui-journey__offer-type",children:x==="1on1"?"Private 1:1 Session":"Group Class"}),e.jsx("div",{className:"yui-journey__offer-note",children:"Your payment is protected. Teachers get paid only after you confirm class completion."})]}),e.jsxs("div",{className:"yui-journey__session-location",children:[e.jsx("span",{className:"yui-journey__location-label",children:"Location"}),e.jsx("span",{className:"yui-journey__location-text",children:y?`${y.specificLocation}, ${y.city}`:"Not selected"})]})]})]})})]}),t!==1&&e.jsxs("footer",{className:"yui-journey__footer",children:[e.jsx("button",{type:"button",className:"yui-btn yui-journey__back",onClick:se,disabled:t===1,children:"Back"}),e.jsx("button",{type:"button",className:"yui-btn yui-journey__next",onClick:()=>{if(t===6){const r={selectedTeacherIds:d,persona:E,goal:re,yogaTypeId:O,location:y,timeIds:p,student:{email:g.trim(),wallet:H},pricing:{sessionType:x,customAmount:b}};L==null||L(r),_==null||_(r)}else te()},disabled:!ae,children:t===5?"Review Payment":t===6?"Complete Payment":"Next"})]})]}):e.jsxs("main",{className:"yui-journey__start","aria-label":"Start booking",children:[e.jsx("h1",{className:"yui-journey__start-title",children:"Book a yoga class"}),e.jsx("p",{className:"yui-journey__start-subtitle",children:"Find your class — anywhere, anytime."}),e.jsx("div",{className:"yui-journey__start-actions",children:e.jsx("button",{type:"button",className:"yui-btn yui-journey__cta",onClick:()=>Z(!0),children:"Start a new booking"})})]})})}B.__docgenInfo={description:"",methods:[],displayName:"FullJourney",props:{yogaTypes:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  name: string
  tagline?: string
  personas: string[]
  benefits: Record<string, string[]>
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"tagline",value:{name:"string",required:!1}},{key:"personas",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"benefits",value:{name:"Record",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}],raw:"Record<string, string[]>",required:!0}}]}}],raw:"YogaTypeItem[]"},description:""},yogaTypePersonas:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},days:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  label: string
  times: YogaTimeItem[]
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"times",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string // HH:mm
  label: string
  sublabel?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"sublabel",value:{name:"string",required:!1}}]}}],raw:"YogaTimeItem[]",required:!0}}]}}],raw:"YogaDay[]"},description:""},teachers:{required:!0,tsType:{name:"Array",raw:"TeacherDiscoveryProps['teachers']"},description:""},defaultPersona:{required:!1,tsType:{name:"union",raw:"'Dancer' | 'Runner' | 'Traveler'",elements:[{name:"literal",value:"'Dancer'"},{name:"literal",value:"'Runner'"},{name:"literal",value:"'Traveler'"}]},description:""},defaultStudentEmail:{required:!1,tsType:{name:"string"},description:""},skin:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(result: FullJourneyResult) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  selectedTeacherIds: string[]
  persona: JourneyPersona
  goal: JourneyGoal | 'None'
  yogaTypeId: string
  location: { country: string; city: string; specificLocation: string }
  timeIds: string[] // dayId:HH:mm
  student: { email: string; wallet?: string }
  pricing: {
    sessionType: '1on1' | 'group'
    customAmount: number
  }
}`,signature:{properties:[{key:"selectedTeacherIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"persona",value:{name:"union",raw:"'Dancer' | 'Runner' | 'Traveler'",elements:[{name:"literal",value:"'Dancer'"},{name:"literal",value:"'Runner'"},{name:"literal",value:"'Traveler'"}],required:!0}},{key:"goal",value:{name:"union",raw:"JourneyGoal | 'None'",elements:[{name:"union",raw:"'Flexibility' | 'Recovery' | 'Strength' | 'Calm' | 'None'",elements:[{name:"literal",value:"'Flexibility'"},{name:"literal",value:"'Recovery'"},{name:"literal",value:"'Strength'"},{name:"literal",value:"'Calm'"},{name:"literal",value:"'None'"}]},{name:"literal",value:"'None'"}],required:!0}},{key:"yogaTypeId",value:{name:"string",required:!0}},{key:"location",value:{name:"signature",type:"object",raw:"{ country: string; city: string; specificLocation: string }",signature:{properties:[{key:"country",value:{name:"string",required:!0}},{key:"city",value:{name:"string",required:!0}},{key:"specificLocation",value:{name:"string",required:!0}}]},required:!0}},{key:"timeIds",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!0}},{key:"student",value:{name:"signature",type:"object",raw:"{ email: string; wallet?: string }",signature:{properties:[{key:"email",value:{name:"string",required:!0}},{key:"wallet",value:{name:"string",required:!1}}]},required:!0}},{key:"pricing",value:{name:"signature",type:"object",raw:`{
  sessionType: '1on1' | 'group'
  customAmount: number
}`,signature:{properties:[{key:"sessionType",value:{name:"union",raw:"'1on1' | 'group'",elements:[{name:"literal",value:"'1on1'"},{name:"literal",value:"'group'"}],required:!0}},{key:"customAmount",value:{name:"number",required:!0}}]},required:!0}}]}},name:"result"}],return:{name:"void"}}},description:""},onPayment:{required:!1,tsType:{name:"signature",type:"function",raw:"(paymentData: any) => void",signature:{arguments:[{type:{name:"any"},name:"paymentData"}],return:{name:"void"}}},description:""},locationProps:{required:!1,tsType:{name:"Pick",elements:[{name:"signature",type:"object",raw:`{
  country?: string
  city?: string
  options?: string[]
  value?: Location | null
  onChange?: (location: Location) => void
  onDone?: (location: Location) => void
  skin?: string
  className?: string
  hideDoneButton?: boolean
}`,signature:{properties:[{key:"country",value:{name:"string",required:!1}},{key:"city",value:{name:"string",required:!1}},{key:"options",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"value",value:{name:"union",raw:"Location | null",elements:[{name:"signature",type:"object",raw:`{
  country: string
  city: string
  specificLocation: string
}`,signature:{properties:[{key:"country",value:{name:"string",required:!0}},{key:"city",value:{name:"string",required:!0}},{key:"specificLocation",value:{name:"string",required:!0}}]}},{name:"null"}],required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(location: Location) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  country: string
  city: string
  specificLocation: string
}`,signature:{properties:[{key:"country",value:{name:"string",required:!0}},{key:"city",value:{name:"string",required:!0}},{key:"specificLocation",value:{name:"string",required:!0}}]}},name:"location"}],return:{name:"void"}},required:!1}},{key:"onDone",value:{name:"signature",type:"function",raw:"(location: Location) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  country: string
  city: string
  specificLocation: string
}`,signature:{properties:[{key:"country",value:{name:"string",required:!0}},{key:"city",value:{name:"string",required:!0}},{key:"specificLocation",value:{name:"string",required:!0}}]}},name:"location"}],return:{name:"void"}},required:!1}},{key:"skin",value:{name:"string",required:!1}},{key:"className",value:{name:"string",required:!1}},{key:"hideDoneButton",value:{name:"boolean",required:!1}}]}},{name:"union",raw:"'country' | 'city' | 'options'",elements:[{name:"literal",value:"'country'"},{name:"literal",value:"'city'"},{name:"literal",value:"'options'"}]}],raw:"Pick<LocationPickerProps, 'country' | 'city' | 'options'>"},description:""},startSecondaryLabel:{required:!1,tsType:{name:"string"},description:""},onStartSecondary:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},paymentSummary:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  currentBalanceUSDC: number
  estimatedGasFeeETH?: number  // Gas fee in ETH
  estimatedGasFeeUSD?: number  // Gas fee in USD equivalent
  defaultSessionType?: SessionType
  defaultOfferAmount?: number
}`,signature:{properties:[{key:"currentBalanceUSDC",value:{name:"number",required:!0}},{key:"estimatedGasFeeETH",value:{name:"number",required:!1}},{key:"estimatedGasFeeUSD",value:{name:"number",required:!1}},{key:"defaultSessionType",value:{name:"union",raw:"'1on1' | 'group'",elements:[{name:"literal",value:"'1on1'"},{name:"literal",value:"'group'"}],required:!1}},{key:"defaultOfferAmount",value:{name:"number",required:!1}}]}},description:""},isAuthenticated:{required:!1,tsType:{name:"boolean"},description:""},userEmail:{required:!1,tsType:{name:"string"},description:""},userWallet:{required:!1,tsType:{name:"string"},description:""},LoginComponent:{required:!1,tsType:{name:"ReactComponentType",raw:"React.ComponentType<any>",elements:[{name:"any"}]},description:""},onAuthRequired:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Fe={title:"Ulyx/FullJourney",component:B};function be(o){const[u,i]=o.split(":").map(c=>parseInt(c,10)),l=new Date;return l.setHours(u,i,0,0),l.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}function v(o,u,i=30){const l=a=>{const[m,j]=a.split(":").map(_=>parseInt(_,10));return m*60+j},c=a=>a<10?`0${a}`:String(a),D=[];for(let a=l(o);a<=l(u);a+=i){const m=Math.floor(a/60),j=a%60;D.push(`${c(m)}:${c(j)}`)}return D}function n(o,u){return o.map(i=>({id:i,label:be(i),sublabel:u===i?"Peak":void 0}))}const T=v("05:30","07:00"),h=v("09:00","11:00"),q=v("12:00","13:00"),G=v("17:00","20:00"),V=v("17:00","18:00"),Ne=[{id:"mon",label:"Monday",times:[...n(T),...n(h),...n(q),...n(G,"18:00")]},{id:"tue",label:"Tuesday",times:[...n(T),...n(h),...n(q),...n(G,"18:00")]},{id:"wed",label:"Wednesday",times:[...n(T),...n(h),...n(q),...n(G,"18:00")]},{id:"thu",label:"Thursday",times:[...n(T),...n(h),...n(q),...n(V,"18:00")]},{id:"fri",label:"Friday",times:[...n(T),...n(h),...n(q),...n(V,"17:30")]},{id:"sat",label:"Saturday",times:n(h)},{id:"sun",label:"Sunday",times:[...n(v("09:30","11:00")),...n(["13:00","14:00","15:00"])]}],ke=[{id:"vinyasa",name:"Vinyasa",tagline:"Flow with breath",personas:["runner","traveler","dancer"],benefits:{runner:["Build heat","Mobility for stride","Core stability"],traveler:["Shake off jet lag","Improve circulation","Clear mind"],dancer:["Fluidity & balance","Expressive flow"]}},{id:"yin",name:"Yin",tagline:"Deep stretch",personas:["runner","traveler"],benefits:{runner:["Post-run recovery","Hip opening"],traveler:["Reset nervous system","Gentle decompression"],dancer:["Release fascia"]}},{id:"hatha",name:"Hatha",tagline:"Foundational & calm",personas:["runner","traveler","dancer"],benefits:{runner:["Steady strength"],traveler:["Grounding breath"],dancer:["Alignment & control"]}}],S={render:()=>{const[o,u]=je.useState(null);return e.jsx("div",{"data-skin":"ulyxes",style:{maxWidth:720},children:e.jsx(B,{yogaTypes:ke,yogaTypePersonas:["runner","traveler","dancer"],days:Ne,defaultPersona:"Traveler",locationProps:{country:"Georgia",city:"Tbilisi",options:["Vake Park","Lisi Lake","Turtle Lake"]},onSubmit:i=>{u(i),console.log(i)}})})}};var W,z,K;S.parameters={...S.parameters,docs:{...(W=S.parameters)==null?void 0:W.docs,source:{originalSource:`{
  render: () => {
    const [result, setResult] = useState<any>(null);
    return <div data-skin="ulyxes" style={{
      maxWidth: 720
    }}>
        <FullJourney yogaTypes={yogaTypes} yogaTypePersonas={['runner', 'traveler', 'dancer']} days={days} defaultPersona="Traveler" locationProps={{
        country: 'Georgia',
        city: 'Tbilisi',
        options: ['Vake Park', 'Lisi Lake', 'Turtle Lake']
      }} onSubmit={r => {
        setResult(r);
        console.log(r);
      }} />
      </div>;
  }
}`,...(K=(z=S.parameters)==null?void 0:z.docs)==null?void 0:K.source}}};const Ge=["Flow"];export{S as Flow,Ge as __namedExportsOrder,Fe as default};
