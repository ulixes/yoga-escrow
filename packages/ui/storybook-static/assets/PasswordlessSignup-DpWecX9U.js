import{j as e}from"./jsx-runtime-CDt2p4po.js";import{r as d}from"./index-GiUgBvb1.js";const g=({size:v="md",variant:m="primary",className:f,children:_,...c})=>e.jsx("button",{className:["yui-btn",v?`yui-btn--${v}`:void 0,m?`yui-btn--${m}`:void 0,f].filter(Boolean).join(" "),...c,children:_});g.__docgenInfo={description:"",methods:[],displayName:"Button",props:{size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"",defaultValue:{value:"'md'",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | 'ghost'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'ghost'"}]},description:"",defaultValue:{value:"'primary'",computed:!1}}}};const J=({initialEmail:v="",step:m,onRequestCode:f,onVerifyCode:_,onResendCode:c,onSuccess:w,onError:T,title:q,description:E,autoFocus:C=!0,codeLength:o=6,className:b,skin:h,containerProps:x,emailInputProps:P,codeInputProps:j,requestButtonProps:M,verifyButtonProps:N,resendButtonProps:H,translations:B={}})=>{const[L,s]=d.useState("enterEmail"),a=m!==void 0,r=a?m:L,[l,k]=d.useState(v),[p,D]=d.useState(""),[y,u]=d.useState(null),t={enterEmailTitle:"Sign up or log in",enterEmailDescription:"We will email you a one-time code.",emailPlaceholder:"you@example.com",requestCode:"Send code",sendingCode:"Sending…",enterCodeTitle:"Enter the code",enterCodeDescription:`Enter the ${o}-digit code we sent to`,codePlaceholder:"123456",verify:"Verify",verifying:"Verifying…",resendCode:"Resend code",success:"You are logged in!",error:"Something went wrong",...B},A=(n=>/.+@.+\..+/.test(n))(l),I=p.length===o;d.useEffect(()=>{y&&T&&T(y)},[y,T]);const R=async n=>{n==null||n.preventDefault(),u(null);try{a||s("sendingCode"),await f(l),a||s("enterCode")}catch(i){u((i==null?void 0:i.message)||t.error),a||s("error")}},V=async n=>{n==null||n.preventDefault(),u(null);try{a||s("verifyingCode"),await _(l,p),a||s("success"),w==null||w(l)}catch(i){u((i==null?void 0:i.message)||t.error),a||s("error")}},S=async()=>{u(null);try{await(c==null?void 0:c(l))}catch(n){u((n==null?void 0:n.message)||t.error)}},$=d.useMemo(()=>Array.from({length:o}),[o]),O=["yui-pwls",b].filter(Boolean).join(" "),W=h?{"data-skin":h}:{},Y=()=>e.jsx("form",{className:"yui-pwls__form",onSubmit:R,children:e.jsxs("div",{className:"yui-pwls__section yui-pwls__section--email",children:[e.jsx("h2",{className:"yui-pwls__title",children:q||t.enterEmailTitle}),e.jsx("p",{className:"yui-pwls__description",children:E||t.enterEmailDescription}),e.jsx("input",{autoFocus:C,type:"email",inputMode:"email",name:"email",placeholder:t.emailPlaceholder,value:l,onChange:n=>k(n.target.value),className:"yui-pwls__input yui-pwls__input--email",...P}),e.jsx(g,{type:"submit",disabled:!A||r==="sendingCode",className:"yui-btn yui-pwls__btn yui-pwls__btn--request",...M,children:r==="sendingCode"?t.sendingCode:t.requestCode})]})}),z=()=>e.jsx("form",{className:"yui-pwls__form",onSubmit:V,children:e.jsxs("div",{className:"yui-pwls__section yui-pwls__section--code",children:[e.jsx("h2",{className:"yui-pwls__title",children:t.enterCodeTitle}),e.jsxs("p",{className:"yui-pwls__description",children:[t.enterCodeDescription," ",e.jsx("strong",{children:l})]}),e.jsx("input",{autoFocus:C,type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"code",placeholder:t.codePlaceholder,value:p,onChange:n=>{const i=n.target.value.replace(/\D/g,"").slice(0,o);D(i)},className:"yui-pwls__input yui-pwls__input--code",...j}),e.jsx("div",{className:"yui-pwls__code-boxes",style:{gridTemplateColumns:`repeat(${o}, minmax(0, 1fr))`},"aria-hidden":!0,children:$.map((n,i)=>e.jsx("div",{className:"yui-pwls__code-box","data-filled":!!p[i],children:e.jsx("span",{className:"yui-pwls__code-digit",children:p[i]||""})},i))}),e.jsxs("div",{className:"yui-pwls__actions",children:[e.jsx(g,{type:"submit",disabled:!I||r==="verifyingCode",className:"yui-btn yui-pwls__btn yui-pwls__btn--verify",...N,children:r==="verifyingCode"?t.verifying:t.verify}),e.jsx(g,{type:"button",variant:"secondary",onClick:S,className:"yui-btn yui-pwls__btn yui-pwls__btn--resend",...H,children:t.resendCode})]})]})}),F=()=>e.jsx("div",{className:"yui-pwls__section yui-pwls__section--success",children:e.jsx("h2",{className:"yui-pwls__title",children:t.success})}),G=()=>e.jsxs("div",{className:"yui-pwls__section yui-pwls__section--error",children:[e.jsx("h2",{className:"yui-pwls__title",children:t.error}),y&&e.jsx("p",{className:"yui-pwls__error",children:y}),e.jsx(g,{variant:"secondary",onClick:()=>s("enterEmail"),children:t.requestCode})]});return e.jsxs("div",{className:O,...W,...x,children:[r==="enterEmail"||r==="sendingCode"?Y():null,r==="enterCode"||r==="verifyingCode"?z():null,r==="success"?F():null,r==="error"?G():null]})};J.__docgenInfo={description:"",methods:[],displayName:"PasswordlessSignup",props:{initialEmail:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},step:{required:!1,tsType:{name:"union",raw:`| 'enterEmail'
| 'sendingCode'
| 'enterCode'
| 'verifyingCode'
| 'success'
| 'error'`,elements:[{name:"literal",value:"'enterEmail'"},{name:"literal",value:"'sendingCode'"},{name:"literal",value:"'enterCode'"},{name:"literal",value:"'verifyingCode'"},{name:"literal",value:"'success'"},{name:"literal",value:"'error'"}]},description:""},onRequestCode:{required:!0,tsType:{name:"signature",type:"function",raw:"(email: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"email"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onVerifyCode:{required:!0,tsType:{name:"signature",type:"function",raw:"(email: string, code: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"email"},{type:{name:"string"},name:"code"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onResendCode:{required:!1,tsType:{name:"signature",type:"function",raw:"(email: string) => Promise<void> | void",signature:{arguments:[{type:{name:"string"},name:"email"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(email: string) => void",signature:{arguments:[{type:{name:"string"},name:"email"}],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(message: string) => void",signature:{arguments:[{type:{name:"string"},name:"message"}],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},codeLength:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"6",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},skin:{required:!1,tsType:{name:"string"},description:""},containerProps:{required:!1,tsType:{name:"ReactHTMLAttributes",raw:"React.HTMLAttributes<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""},emailInputProps:{required:!1,tsType:{name:"ReactInputHTMLAttributes",raw:"React.InputHTMLAttributes<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:""},codeInputProps:{required:!1,tsType:{name:"ReactInputHTMLAttributes",raw:"React.InputHTMLAttributes<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:""},requestButtonProps:{required:!1,tsType:{name:"ReactButtonHTMLAttributes",raw:"React.ButtonHTMLAttributes<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""},verifyButtonProps:{required:!1,tsType:{name:"ReactButtonHTMLAttributes",raw:"React.ButtonHTMLAttributes<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""},resendButtonProps:{required:!1,tsType:{name:"ReactButtonHTMLAttributes",raw:"React.ButtonHTMLAttributes<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},description:""},translations:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  enterEmailTitle: string
  enterEmailDescription: string
  emailPlaceholder: string
  requestCode: string
  sendingCode: string
  enterCodeTitle: string
  enterCodeDescription: string
  codePlaceholder: string
  verify: string
  verifying: string
  resendCode: string
  success: string
  error: string
}`,signature:{properties:[{key:"enterEmailTitle",value:{name:"string",required:!0}},{key:"enterEmailDescription",value:{name:"string",required:!0}},{key:"emailPlaceholder",value:{name:"string",required:!0}},{key:"requestCode",value:{name:"string",required:!0}},{key:"sendingCode",value:{name:"string",required:!0}},{key:"enterCodeTitle",value:{name:"string",required:!0}},{key:"enterCodeDescription",value:{name:"string",required:!0}},{key:"codePlaceholder",value:{name:"string",required:!0}},{key:"verify",value:{name:"string",required:!0}},{key:"verifying",value:{name:"string",required:!0}},{key:"resendCode",value:{name:"string",required:!0}},{key:"success",value:{name:"string",required:!0}},{key:"error",value:{name:"string",required:!0}}]}}],raw:`Partial<{
  enterEmailTitle: string
  enterEmailDescription: string
  emailPlaceholder: string
  requestCode: string
  sendingCode: string
  enterCodeTitle: string
  enterCodeDescription: string
  codePlaceholder: string
  verify: string
  verifying: string
  resendCode: string
  success: string
  error: string
}>`},description:"",defaultValue:{value:"{}",computed:!1}}}};export{J as P};
