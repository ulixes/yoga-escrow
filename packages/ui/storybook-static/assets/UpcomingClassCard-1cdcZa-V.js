import{j as s}from"./jsx-runtime-CDt2p4po.js";import{r as w}from"./index-GiUgBvb1.js";function v(a){const n=new Date(a*1e3),e=n.toLocaleDateString("en-US",{weekday:"long"}),t=n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),r=n.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${e}, ${r} at ${t}`}function f(a){return a.includes(" student")?a:`${a.slice(0,6)}...${a.slice(-4)}`}function b(a){switch(a){case"accepted":return"Accepted";case"completed":return"Paid";case"cancelled":return"Cancelled";case"awaiting_release":return"Awaiting Release";default:return a.charAt(0).toUpperCase()+a.slice(1)}}function I(a){switch(a){case"completed":return"upcoming-class-card__student-status--completed";case"cancelled":return"upcoming-class-card__student-status--cancelled";case"awaiting_release":return"upcoming-class-card__student-status--awaiting";default:return"upcoming-class-card__student-status--accepted"}}function $(a){const n=Date.now()/1e3,e=a-n;if(e<0)return"Past due";const t=Math.floor(e/86400),r=Math.floor(e%86400/3600),o=Math.floor(e%3600/60);return t>0?`in ${t} day${t>1?"s":""}`:r>0?`in ${r} hour${r>1?"s":""}`:o>0?`in ${o} minute${o>1?"s":""}`:"very soon"}const S=({acceptedClass:a,onViewDetails:n,onCancel:e,onViewStudentDetails:t,fiatCurrency:r="USD",ethToFiatRate:o,formatFiat:p,className:x})=>{var h;const[d,j]=w.useState(!1),N=["upcoming-class-card",x].filter(Boolean).join(" "),_=c=>{if(!o)return null;const l=c*o;return p?p(l,r):new Intl.NumberFormat(void 0,{style:"currency",currency:r}).format(l)},g=$(a.classTime),u=g==="Past due",i=a.isGroup&&a.students&&a.students.length>1,m=i&&a.totalPayout||a.payout,y=i?`${a.totalStudents||((h=a.students)==null?void 0:h.length)||0} Students`:f(a.studentAddress);return s.jsxs("div",{className:`${N} ${u?"upcoming-class-card--past-due":""}`,children:[s.jsxs("div",{className:"upcoming-class-card__header",children:[s.jsxs("div",{className:"upcoming-class-card__title-section",children:[s.jsx("h3",{className:"upcoming-class-card__title",children:a.description}),s.jsxs("div",{className:"upcoming-class-card__time-info",children:[s.jsx("span",{className:"upcoming-class-card__datetime",children:v(a.classTime)}),s.jsx("span",{className:`upcoming-class-card__countdown ${u?"upcoming-class-card__countdown--past-due":""}`,children:g})]})]}),s.jsx("div",{className:"upcoming-class-card__status",children:s.jsx("span",{className:`upcoming-class-card__status-badge upcoming-class-card__status-badge--${a.status}`,children:a.status.toUpperCase()})})]}),s.jsxs("div",{className:"upcoming-class-card__details",children:[s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:i?"Students:":"Student:"}),s.jsx("span",{className:"upcoming-class-card__detail-value",children:y})]}),s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:"Location:"}),s.jsx("span",{className:"upcoming-class-card__detail-value",children:a.location})]}),s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:i?"Total Payout:":"Payout:"}),s.jsxs("span",{className:"upcoming-class-card__detail-value upcoming-class-card__payout",children:[m," ETH",_(parseFloat(m))&&s.jsxs("span",{className:"upcoming-class-card__fiat",children:["(",_(parseFloat(m)),")"]})]})]}),!i&&s.jsxs("div",{className:"upcoming-class-card__detail-row",children:[s.jsx("span",{className:"upcoming-class-card__detail-label",children:"Escrow ID:"}),s.jsxs("span",{className:"upcoming-class-card__detail-value upcoming-class-card__escrow-id",children:["#",a.escrowId]})]}),i&&s.jsx("div",{className:"upcoming-class-card__detail-row",children:s.jsx("button",{className:"upcoming-class-card__roster-toggle",onClick:()=>j(!d),children:d?"Hide Roster ▲":"View Roster ▼"})})]}),i&&d&&a.students&&s.jsxs("div",{className:"upcoming-class-card__roster",children:[s.jsx("div",{className:"upcoming-class-card__roster-header",children:s.jsx("h4",{children:"Roster"})}),s.jsx("div",{className:"upcoming-class-card__roster-list",children:a.students.map((c,l)=>s.jsxs("div",{className:"upcoming-class-card__student-row",children:[s.jsxs("div",{className:"upcoming-class-card__student-info",children:[s.jsxs("span",{className:"upcoming-class-card__student-label",children:["Student ",String.fromCharCode(65+l)," (",f(c.studentAddress),")"]}),s.jsxs("span",{className:"upcoming-class-card__student-payout",children:[c.payout," ETH"]})]}),s.jsxs("div",{className:"upcoming-class-card__student-actions",children:[s.jsx("span",{className:`upcoming-class-card__student-status ${I(c.status)}`,children:b(c.status)}),s.jsxs("button",{className:"upcoming-class-card__student-details",onClick:()=>t==null?void 0:t(c.escrowId),title:`View details for Escrow #${c.escrowId}`,children:["#",c.escrowId]})]})]},c.escrowId))})]}),s.jsxs("div",{className:"upcoming-class-card__actions",children:[s.jsx("button",{className:"upcoming-class-card__action upcoming-class-card__action--details",onClick:()=>n==null?void 0:n(a.escrowId),children:"View Details"}),a.status==="accepted"&&!u&&s.jsx("button",{className:"upcoming-class-card__action upcoming-class-card__action--cancel",onClick:()=>e==null?void 0:e(a.escrowId),children:"Cancel Class"})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"UpcomingClassCard",props:{acceptedClass:{required:!0,tsType:{name:"AcceptedClass"},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},onViewStudentDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"(escrowId: number) => void",signature:{arguments:[{type:{name:"number"},name:"escrowId"}],return:{name:"void"}}},description:""},fiatCurrency:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'USD'",computed:!1}},ethToFiatRate:{required:!1,tsType:{name:"number"},description:""},formatFiat:{required:!1,tsType:{name:"signature",type:"function",raw:"(fiatAmount: number, currency: string) => string",signature:{arguments:[{type:{name:"number"},name:"fiatAmount"},{type:{name:"string"},name:"currency"}],return:{name:"string"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{S as U};
